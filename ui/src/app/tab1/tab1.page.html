<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Overview
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Overview</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-list>

    <ion-list-header class="header" lines="inset">
      <ion-grid>
        <ion-row>
          <ion-col>
            <ion-button class="outerselect" [style.--padding-start]="0" [style.--padding-end]="0">
              <ion-select class="currencySelect" value="{{fiatCurrencies[0].short}}"
                (ionChange)="updateSelectedFiatCurrency($event);">
                <ion-select-option *ngFor="let currency of fiatCurrencies" value="{{currency.short}}">
                  {{currency.short.toUpperCase()}}
                </ion-select-option>
              </ion-select>
            </ion-button>
          </ion-col>
          <ion-col>
            <ion-button class="outerselect" [style.--padding-start]="0" [style.--padding-end]="0">
              <ion-select class="currencySelect" value="{{timeframes[0].id}}"
                (ionChange)="update(timeframe, selectFiatCurrency, $event);">
                <ion-select-option *ngFor="let timeframe of timeframes" value="{{timeframe.id}}">
                  {{timeframe.id.toUpperCase()}}
                </ion-select-option>
              </ion-select>
            </ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-list-header>

    <div>
      <ion-card button *ngFor="let currency of cryptoCurrencies; let i=index" [routerLink]="['./detail/',{currency:currency.short}]" lines="none" class="currencyCard">

        <ion-card-content>
          <ion-title style="overflow: hidden;"> 
            <img src="svgcolor/{{currency.short}}.svg" style=" float:left;">
            <div style="float:left;">
              &nbsp;{{currency.long}}
            </div>
          </ion-title>
        </ion-card-content>

        <div>
          <canvas id="{{currency.short}}" width="400" height="150"></canvas>
        </div>

        <div>
          <ion-grid>
            <ion-row>
              <ion-col>
                <ion-title>
                  {{cardData?.get(currency.short)?.value.toFixed(2)}}
                </ion-title>
              </ion-col>
              <ion-col>
                <!--Getting that + sign infront of a positive number took a while.-->
                <ion-title style="display: inline-block;">
                  <div *ngIf="cardData?.get(currency.short)?.change > 0" style="float: left;">+</div>
                  {{cardData?.get(currency.short)?.change.toFixed(2)}} %
                </ion-title>
              </ion-col>
            </ion-row>
          </ion-grid>
        </div>

      </ion-card>
    </div>
    
    
  </ion-list>

</ion-content>
